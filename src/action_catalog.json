{
  "schema_version": "1.1",
  "actions": [
    {
      "action_id": "context.normalize",
      "input_contract": [
        "$.booking",
        "$.constraints",
        "$.documents",
        "$.resources"
      ],
      "output_contract": [
        "$.audit.normalized_at",
        "$.audit.normalized_by",
        "$.schema_version"
      ],
      "side_effects": [
        "normalizes dates and validates required context fields"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 1
      },
      "security": {
        "access": "port_ops",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "assemble_candidate_rebooking_plan",
      "input_contract": [
        "$.booking.shipment_id",
        "$.booking.top_3_alternatives"
      ],
      "output_contract": [
        "$.booking.rebooking_plan_id"
      ],
      "side_effects": [
        "creates draft rebooking plan"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 20
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "rebooking.slots.suggest",
      "input_contract": [
        "$.booking.alternatives",
        "$.policy.rebooking_auto_suggest",
        "$.booking.slot_chain_constraints",
        "$.policy.selection_strategy",
        "$.policy.max_suggestions"
      ],
      "output_contract": [
        "$.booking.auto_suggested_alternatives"
      ],
      "side_effects": [
        "filters and ranks rebooking alternatives"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 6
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "dispatch.driver.assign",
      "input_contract": [
        "$.booking.container.container_id",
        "$.booking.slot_chain.slot_chain_id",
        "$.booking.carrier_id"
      ],
      "output_contract": [
        "$.booking.driver_id",
        "$.booking.driver_assignment_status"
      ],
      "side_effects": [
        "reserves driver capacity"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 20
      },
      "security": {
        "access": "dispatch",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "gate.anpr.capture",
      "input_contract": [
        "$.booking.vehicle.license_plate",
        "$.booking.facility.gate_id"
      ],
      "output_contract": [
        "$.booking.vehicle.anpr_read"
      ],
      "side_effects": [
        "captures ANPR snapshot"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 2
      },
      "security": {
        "access": "gate_ops",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "approval.destination_change.capture",
      "input_contract": [
        "$.booking.shipment_id",
        "$.booking.destination_change",
        "$.policy.approver"
      ],
      "output_contract": [
        "$.booking.destination_change_approval_id"
      ],
      "side_effects": [
        "records customer approval"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 120
      },
      "security": {
        "access": "customer_success",
        "data_classification": "restricted"
      }
    },
    {
      "action_id": "slot.confirm",
      "input_contract": [
        "$.booking.slot_request_id",
        "$.booking.container.container_id",
        "$.booking.requested_window"
      ],
      "output_contract": [
        "$.booking.slot_id"
      ],
      "side_effects": [
        "books slot with terminal"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 15
      },
      "security": {
        "access": "scheduling",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "slot.chain.confirm",
      "input_contract": [
        "$.booking.slot_chain.slot_chain_id",
        "$.booking.requested_window"
      ],
      "output_contract": [
        "$.booking.slot_chain.confirmation_status"
      ],
      "side_effects": [
        "books slot chain with terminal"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 15
      },
      "security": {
        "access": "scheduling",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "shipment.inbound.detect",
      "input_contract": [
        "$.booking.container.container_id",
        "$.booking.arrival_eta",
        "$.booking.facility.port_code"
      ],
      "output_contract": [
        "$.booking.shipment_id",
        "$.booking.detected_at"
      ],
      "side_effects": [
        "ingests inbound shipment event"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 5
      },
      "security": {
        "access": "port_ops",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "gate.event.emit",
      "input_contract": [
        "$.booking.container.container_id",
        "$.booking.facility.gate_id"
      ],
      "output_contract": [
        "$.tracking.events[]"
      ],
      "side_effects": [
        "emits gate event notification"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 1
      },
      "security": {
        "access": "gate_ops",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "rebooking.preview.generate",
      "input_contract": [
        "$.booking.shipment_id",
        "$.booking.rebooking_plan_id",
        "$.policy.cost_model"
      ],
      "output_contract": [
        "$.booking.eta_impact",
        "$.booking.cost_impact",
        "$.booking.sla_risk"
      ],
      "side_effects": [
        "reads pricing and SLA data"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 15
      },
      "security": {
        "access": "operations",
        "data_classification": "sensitive"
      }
    },
    {
      "action_id": "rebooking.alternatives.handle_insufficient",
      "input_contract": [
        "$.booking.ranked_alternatives",
        "$.policy.minimum_required"
      ],
      "output_contract": [
        "$.booking.alternative_shortfall"
      ],
      "side_effects": [
        "flags insufficient rebooking alternatives"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 5
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "gate.arrival.ingest",
      "input_contract": [
        "$.booking.container.container_id",
        "$.booking.facility.gate_id",
        "$.booking.driver_id"
      ],
      "output_contract": [
        "$.booking.gate_events.last_arrival_at"
      ],
      "side_effects": [
        "records gate arrival intent"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 2
      },
      "security": {
        "access": "gate_ops",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "gate.departure.ingest",
      "input_contract": [
        "$.booking.container.container_id",
        "$.booking.facility.gate_id",
        "$.booking.driver_id"
      ],
      "output_contract": [
        "$.booking.gate_events.last_departure_at"
      ],
      "side_effects": [
        "records gate departure intent"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 2
      },
      "security": {
        "access": "gate_ops",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "notifications.send",
      "input_contract": [
        "$.booking.shipment_id",
        "$.policy.notification_channels"
      ],
      "output_contract": [
        "$.audit.notifications"
      ],
      "side_effects": [
        "sends notifications"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 5
      },
      "security": {
        "access": "communications",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "gate.barrier.open",
      "input_contract": [
        "$.booking.facility.gate_id"
      ],
      "output_contract": [
        "$.booking.gate_events.barrier_opened_at"
      ],
      "side_effects": [
        "opens gate barrier"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 1
      },
      "security": {
        "access": "gate_ops",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "rebooking.alternatives.rank",
      "input_contract": [
        "$.booking.alternatives",
        "$.policy.guardrail_policy",
        "$.policy.cost_model",
        "$.policy.sla_thresholds",
        "$.policy.ranking_weights"
      ],
      "output_contract": [
        "$.booking.ranked_alternatives",
        "$.booking.top_3_alternatives"
      ],
      "side_effects": [
        "scores and ranks rebooking alternatives"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 8
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "gate.scale.read",
      "input_contract": [
        "$.booking.container.container_id",
        "$.booking.facility.scale_id"
      ],
      "output_contract": [
        "$.booking.container.scale_weight"
      ],
      "side_effects": [
        "reads scale weight"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 2
      },
      "security": {
        "access": "gate_ops",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "gate.check_in.record",
      "input_contract": [
        "$.booking.container.container_id",
        "$.booking.facility.gate_id"
      ],
      "output_contract": [
        "$.booking.gate_events.last_check_in_at"
      ],
      "side_effects": [
        "records gate check-in event"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 2
      },
      "security": {
        "access": "gate_ops",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "gate.check_out.record",
      "input_contract": [
        "$.booking.container.container_id",
        "$.booking.facility.gate_id"
      ],
      "output_contract": [
        "$.booking.gate_events.last_check_out_at"
      ],
      "side_effects": [
        "records gate check-out event"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 2
      },
      "security": {
        "access": "gate_ops",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "slot.chain.reserve",
      "input_contract": [
        "$.booking.slot_chain.slot_chain_id",
        "$.resources[]"
      ],
      "output_contract": [
        "$.booking.slot_chain.reservation_id",
        "$.booking.slot_chain.reservation_status"
      ],
      "side_effects": [
        "reserves resource chain capacity"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 15
      },
      "security": {
        "access": "scheduling",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "approval.operations.route",
      "input_contract": [
        "$.booking.rebooking_plan_id",
        "$.policy.approver_group"
      ],
      "output_contract": [
        "$.booking.approval_request_id"
      ],
      "side_effects": [
        "creates approval request"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 30
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "approval.booking.request",
      "input_contract": [
        "$.booking.shipment_id",
        "$.booking.requested_window",
        "$.policy.approver_group"
      ],
      "output_contract": [
        "$.booking.approval_request_id"
      ],
      "side_effects": [
        "creates approval request"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 30
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "compliance.legal_review.route",
      "input_contract": [
        "$.booking.shipment_id",
        "$.booking.route",
        "$.compliance.restrictions[]",
        "$.compliance.hold_reason"
      ],
      "output_contract": [
        "$.compliance.legal_case_id",
        "$.compliance.legal_review_status"
      ],
      "side_effects": [
        "creates legal review case"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 120
      },
      "security": {
        "access": "legal",
        "data_classification": "restricted"
      }
    },
    {
      "action_id": "gate.qr.scan",
      "input_contract": [
        "$.booking.driver_id",
        "$.booking.facility.gate_id"
      ],
      "output_contract": [
        "$.booking.driver.qr_scan"
      ],
      "side_effects": [
        "scans QR token"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 2
      },
      "security": {
        "access": "gate_ops",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "gate.rfid.scan",
      "input_contract": [
        "$.booking.driver_id",
        "$.booking.facility.gate_id"
      ],
      "output_contract": [
        "$.booking.driver.badge_scan"
      ],
      "side_effects": [
        "scans RFID badge"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 2
      },
      "security": {
        "access": "gate_ops",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "rebooking.alternatives.search",
      "input_contract": [
        "$.booking.shipment_id",
        "$.constraints",
        "$.booking.slot_chain.stages[]"
      ],
      "output_contract": [
        "$.booking.alternatives",
        "$.booking.slot_chain.candidates"
      ],
      "side_effects": [
        "reads port and slot chain capacity data"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 12
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "slot.alternatives.search",
      "input_contract": [
        "$.booking.shipment_id",
        "$.constraints"
      ],
      "output_contract": [
        "$.booking.alternatives"
      ],
      "side_effects": [
        "reads port capacity data"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 10
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "slot.chain.suggest",
      "input_contract": [
        "$.booking.container.container_id",
        "$.booking.arrival_eta",
        "$.booking.requested_window",
        "$.booking.slot_chain.stages[]",
        "$.constraints.mode"
      ],
      "output_contract": [
        "$.booking.slot_chain.candidates",
        "$.booking.slot_chain.slot_chain_id"
      ],
      "side_effects": [
        "queries slot chain inventory"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 12
      },
      "security": {
        "access": "scheduling",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "slot.search",
      "input_contract": [
        "$.booking.container.container_id",
        "$.booking.arrival_eta",
        "$.booking.requested_window",
        "$.constraints.mode"
      ],
      "output_contract": [
        "$.booking.slot_candidates"
      ],
      "side_effects": [
        "queries slot inventory"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 10
      },
      "security": {
        "access": "scheduling",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "eta.update",
      "input_contract": [
        "$.booking.shipment_id",
        "$.booking.new_eta"
      ],
      "output_contract": [
        "$.booking.previous_eta",
        "$.booking.updated_eta"
      ],
      "side_effects": [
        "updates customer ETA data"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 10
      },
      "security": {
        "access": "operations",
        "data_classification": "sensitive"
      }
    },
    {
      "action_id": "documents.check",
      "input_contract": [
        "$.booking.shipment_id",
        "$.documents.required[]",
        "$.documents.blocking_rules[]"
      ],
      "output_contract": [
        "$.documents.status",
        "$.documents.issues"
      ],
      "side_effects": [
        "reads compliance documents"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 15
      },
      "security": {
        "access": "compliance",
        "data_classification": "restricted"
      }
    },
    {
      "action_id": "gate.exit_authorization.validate",
      "input_contract": [
        "$.booking.container.container_id",
        "$.booking.driver_id"
      ],
      "output_contract": [
        "$.booking.exit_authorization.status"
      ],
      "side_effects": [
        "validates exit authorization"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 5
      },
      "security": {
        "access": "security",
        "data_classification": "restricted"
      }
    },
    {
      "action_id": "gate.credentials.validate",
      "input_contract": [
        "$.booking.container.container_id",
        "$.booking.driver_id"
      ],
      "output_contract": [
        "$.booking.gate_access.status"
      ],
      "side_effects": [
        "validates gate credentials"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 5
      },
      "security": {
        "access": "security",
        "data_classification": "restricted"
      }
    },
    {
      "action_id": "rebooking.guardrails.validate",
      "input_contract": [
        "$.booking.rebooking_plan_id",
        "$.policy.guardrail_policy"
      ],
      "output_contract": [
        "$.booking.guardrail_status",
        "$.booking.guardrail_violations"
      ],
      "side_effects": [
        "evaluates policy rules"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 10
      },
      "security": {
        "access": "compliance",
        "data_classification": "sensitive"
      }
    },
    {
      "action_id": "documents.ingest",
      "input_contract": [
        "$.documents.provided[]",
        "$.documents.source"
      ],
      "output_contract": [
        "$.documents.ingested_at",
        "$.documents.ingest_status"
      ],
      "side_effects": [
        "stores uploaded documents"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 5
      },
      "security": {
        "access": "compliance",
        "data_classification": "restricted"
      }
    },
    {
      "action_id": "compliance.rules.evaluate",
      "input_contract": [
        "$.documents.provided[]",
        "$.compliance.ruleset_version"
      ],
      "output_contract": [
        "$.documents.issues",
        "$.compliance.rule_outcome"
      ],
      "side_effects": [
        "evaluates compliance rules"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 10
      },
      "security": {
        "access": "compliance",
        "data_classification": "restricted"
      }
    },
    {
      "action_id": "evidence.attach",
      "input_contract": [
        "$.documents.evidence[]",
        "$.booking.reference_id"
      ],
      "output_contract": [
        "$.audit.evidence_refs[]"
      ],
      "side_effects": [
        "attaches evidence artifacts"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 5
      },
      "security": {
        "access": "compliance",
        "data_classification": "restricted"
      }
    },
    {
      "action_id": "compliance.override.review",
      "input_contract": [
        "$.compliance.override_request",
        "$.policy.override_roles"
      ],
      "output_contract": [
        "$.compliance.override_status",
        "$.compliance.override_expires_at"
      ],
      "side_effects": [
        "creates override review case"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 120
      },
      "security": {
        "access": "compliance",
        "data_classification": "restricted"
      }
    },
    {
      "action_id": "documents.revalidate",
      "input_contract": [
        "$.documents.provided[]",
        "$.documents.corrections"
      ],
      "output_contract": [
        "$.documents.status",
        "$.documents.issues"
      ],
      "side_effects": [
        "revalidates document set"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 10
      },
      "security": {
        "access": "compliance",
        "data_classification": "restricted"
      }
    },
    {
      "action_id": "status.update",
      "input_contract": [
        "$.booking.reference_id",
        "$.booking.status"
      ],
      "output_contract": [
        "$.booking.status_updated_at"
      ],
      "side_effects": [
        "updates workflow status"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 2
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "remediation.recommend",
      "input_contract": [
        "$.documents.issues"
      ],
      "output_contract": [
        "$.documents.recommendations[]"
      ],
      "side_effects": [
        "generates remediation guidance"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 8
      },
      "security": {
        "access": "compliance",
        "data_classification": "restricted"
      }
    },
    {
      "action_id": "delay.detect",
      "input_contract": [
        "$.tracking.events[]",
        "$.policy.delay_thresholds"
      ],
      "output_contract": [
        "$.alerts.delay_candidates[]"
      ],
      "side_effects": [
        "detects delay candidates"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 5
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "delay.classify",
      "input_contract": [
        "$.alerts.delay_candidates[]",
        "$.policy.delay_severity"
      ],
      "output_contract": [
        "$.alerts.delay_classifications[]"
      ],
      "side_effects": [
        "classifies delay severity"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 5
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "alert.deduplicate",
      "input_contract": [
        "$.alerts.delay_classifications[]",
        "$.policy.alert_dedupe"
      ],
      "output_contract": [
        "$.alerts.deduped[]"
      ],
      "side_effects": [
        "applies suppression rules"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 3
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "alert.route",
      "input_contract": [
        "$.alerts.deduped[]",
        "$.policy.notification_matrix"
      ],
      "output_contract": [
        "$.alerts.routed[]"
      ],
      "side_effects": [
        "routes alerts"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 2
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "alert.escalate.operations",
      "input_contract": [
        "$.alerts.routed[]",
        "$.policy.escalation_windows"
      ],
      "output_contract": [
        "$.alerts.escalations[]"
      ],
      "side_effects": [
        "escalates to operations"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 15
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "alert.escalate.compliance",
      "input_contract": [
        "$.alerts.routed[]",
        "$.policy.escalation_windows"
      ],
      "output_contract": [
        "$.alerts.escalations[]"
      ],
      "side_effects": [
        "escalates to compliance"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 30
      },
      "security": {
        "access": "compliance",
        "data_classification": "restricted"
      }
    },
    {
      "action_id": "alert.escalate.customer_success",
      "input_contract": [
        "$.alerts.routed[]",
        "$.policy.escalation_windows"
      ],
      "output_contract": [
        "$.alerts.escalations[]"
      ],
      "side_effects": [
        "escalates to customer success"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 45
      },
      "security": {
        "access": "customer_success",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "routing.replan",
      "input_contract": [
        "$.booking.shipment_id",
        "$.constraints"
      ],
      "output_contract": [
        "$.booking.reroute_plan_id"
      ],
      "side_effects": [
        "generates reroute plan"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 20
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "audit.log_resolution",
      "input_contract": [
        "$.alerts.escalations[]",
        "$.resolution"
      ],
      "output_contract": [
        "$.audit.escalation_log[]"
      ],
      "side_effects": [
        "writes escalation log"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 2
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "tracking.events.ingest",
      "input_contract": [
        "$.tracking.raw_events[]"
      ],
      "output_contract": [
        "$.tracking.events[]"
      ],
      "side_effects": [
        "normalizes tracking events"
      ],
      "idempotency_key": "$.tracking.tracking_id",
      "sla": {
        "response_time_minutes": 2
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "eta.calculate_state",
      "input_contract": [
        "$.tracking.events[]",
        "$.policy.eta_tolerance_minutes"
      ],
      "output_contract": [
        "$.tracking.eta_state"
      ],
      "side_effects": [
        "computes ETA state"
      ],
      "idempotency_key": "$.tracking.tracking_id",
      "sla": {
        "response_time_minutes": 5
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "delay.reason.classify",
      "input_contract": [
        "$.tracking.events[]",
        "$.policy.delay_reason_matrix"
      ],
      "output_contract": [
        "$.alerts.delay_reasons[]"
      ],
      "side_effects": [
        "classifies delay reasons"
      ],
      "idempotency_key": "$.tracking.tracking_id",
      "sla": {
        "response_time_minutes": 5
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "tracking.driver.status",
      "input_contract": [
        "$.tracking.driver_id",
        "$.tracking.device_refs"
      ],
      "output_contract": [
        "$.tracking.driver_status"
      ],
      "side_effects": [
        "fetches driver status"
      ],
      "idempotency_key": "$.tracking.tracking_id",
      "sla": {
        "response_time_minutes": 5
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "routing.handle",
      "input_contract": [
        "$.booking.shipment_id",
        "$.routing.options"
      ],
      "output_contract": [
        "$.routing.updated_plan"
      ],
      "side_effects": [
        "updates routing plan"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 15
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "alert.late_warning",
      "input_contract": [
        "$.tracking.eta_state",
        "$.policy.no_show_grace_minutes"
      ],
      "output_contract": [
        "$.alerts.late_warnings[]"
      ],
      "side_effects": [
        "issues late arrival warnings"
      ],
      "idempotency_key": "$.tracking.tracking_id",
      "sla": {
        "response_time_minutes": 5
      },
      "security": {
        "access": "operations",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "slot.hold",
      "input_contract": [
        "$.booking.slot_candidate_id",
        "$.booking.requested_window",
        "$.policy.hold_ttl_minutes"
      ],
      "output_contract": [
        "$.booking.hold_id",
        "$.booking.hold_expires_at"
      ],
      "side_effects": [
        "creates temporary slot hold"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 5
      },
      "security": {
        "access": "scheduling",
        "data_classification": "operational"
      }
    },
    {
      "action_id": "slot.reschedule",
      "input_contract": [
        "$.booking.slot_id",
        "$.booking.new_requested_window"
      ],
      "output_contract": [
        "$.booking.reschedule_id",
        "$.booking.updated_slot_id"
      ],
      "side_effects": [
        "reschedules slot"
      ],
      "idempotency_key": "$.booking.reference_id",
      "sla": {
        "response_time_minutes": 15
      },
      "security": {
        "access": "scheduling",
        "data_classification": "operational"
      }
    }
  ]
}
