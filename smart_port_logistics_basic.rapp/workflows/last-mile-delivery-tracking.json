{
  "type": "workflow",
  "name": "Last-Mile Delivery Tracking",
  "references": {
    "timeline_events": "../tracking/events.json#/timeline_events",
    "eta_logic_states": "../tracking/events.json#/eta_logic_states",
    "delay_reasons": "../tracking/events.json#/delay_reasons"
  },
  "steps": [
    {
      "name": "Ingest milestone timeline events",
      "timeline_events": [
        "ARRIVED_TERMINAL",
        "RELEASED_FROM_TERMINAL",
        "DEPARTED_TERMINAL",
        "ARRIVED_YARD",
        "OUT_FOR_DELIVERY",
        "ARRIVED_DESTINATION",
        "DELIVERED"
      ],
      "action_id": "tracking.events.ingest"
    },
    {
      "name": "Calculate ETA logic state",
      "eta_logic_states": [
        "ETA_CONFIRMED",
        "ETA_PROJECTED",
        "ETA_AT_RISK",
        "ETA_UNKNOWN"
      ],
      "action_id": "eta.calculate_state"
    },
    {
      "name": "Classify delay reason and trigger alerts",
      "delay_reasons": [
        "GATE_CONGESTION",
        "DOC_HOLD",
        "EQUIPMENT_SHORTAGE",
        "WEATHER",
        "DRIVER_LATE"
      ],
      "action_id": "delay.reason.classify"
    },
    {
      "name": "Display driver status from port to warehouse",
      "action_id": "tracking.driver.status"
    },
    {
      "name": "Handle re-routes",
      "action_id": "routing.handle"
    },
    {
      "name": "Issue late arrival warnings",
      "action_id": "alert.late_warning"
    }
  ]
}
